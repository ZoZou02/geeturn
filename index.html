<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GEEBAR之轉生</title>
    <!-- Favicon 支持 -->
    <link rel="icon" type="image/x-icon" href="favicon/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-96x96.png">
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
    <link rel="manifest" href="favicon/site.webmanifest">
    <script>
        // 设备检测：判断是否为移动设备
        function isMobileDevice() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }
        
        // 检测是否为竖屏模式
        function isPortraitMode() {
            // 检查屏幕宽高比
            return window.innerHeight > window.innerWidth || 
                   (screen.orientation && screen.orientation.type.includes('portrait')) ||
                   (window.orientation !== undefined && (window.orientation === 0 || window.orientation === 180));
        }
        
        // 处理移动设备和屏幕方向
        function handleDeviceAndOrientation() {
            // 如果是移动设备且处于竖屏模式
            if (isMobileDevice() && isPortraitMode()) {
                // 阻止页面继续加载
                document.write('<style>*{margin:0;padding:0;} body{background:radial-gradient(circle, #fd2d5c 0%, #fd2d5c 10%, #000 10%, #000 20%, #fd2d5c 20%, #fd2d5c 30%, #000 30%, #000 40%, #fd2d5c 40%, #fd2d5c 50%, #000 50%, #000 60%, #fd2d5c 60%, #fd2d5c 70%, #000 70%, #000 80%, #fd2d5c 80%, #fd2d5c 90%, #000 90%, #000 100%); background-size: 100% 100%; color:#fff;font-family:Arial,sans-serif;text-align:center;display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;}</style>');
                document.write('<div style="background:#000; border:4px solid #fff; padding:20px;">');
                document.write('<h1>请<span style="color:#fd2d5c;">旋转设备</span>为横屏模式</h1>');
                document.write('<p style="margin-top:10px;">或使用<span style="color:#fd2d5c;">PC</span>端访问获得最佳体验</p>');
                document.write('</div>');
                // 阻止后续脚本执行
                window.stop();
            }
        }
        
        // 立即执行设备检测，在页面加载前
        handleDeviceAndOrientation();
        
        // 添加屏幕方向变化监听
        window.addEventListener('orientationchange', handleDeviceAndOrientation);
        window.addEventListener('resize', handleDeviceAndOrientation);
        
        // 针对iOS设备的额外处理
        window.addEventListener('load', function() {
            // 延迟执行一次检查，确保在页面完全加载后能正确检测方向
            setTimeout(handleDeviceAndOrientation, 500);
        });

        // 进入全屏模式的函数
        function enterFullscreen() {
            const docEl = document.documentElement;

            if (docEl.requestFullscreen) {
                docEl.requestFullscreen();
            } else if (docEl.mozRequestFullScreen) { // Firefox
                docEl.mozRequestFullScreen();
            } else if (docEl.webkitRequestFullscreen) { // Chrome, Safari
                docEl.webkitRequestFullscreen();
            } else if (docEl.msRequestFullscreen) { // IE/Edge
                docEl.msRequestFullscreen();
            }
        }

        // 监听用户交互后立即进入全屏
        document.addEventListener('DOMContentLoaded', function () {
            // 尝试自动进入全屏
            enterFullscreen();

            // 添加点击事件作为备用，确保用户交互后能进入全屏
            document.addEventListener('click', function enterFullscreenOnClick() {
                enterFullscreen();
                // 移除事件监听器，避免重复触发
                document.removeEventListener('click', enterFullscreenOnClick);
            });
        });
    </script>
    <!-- 预加载关键资源 -->
    <!-- <link rel="preload" href="https://cdn.jsdelivr.net/gh/ZoZou02/geeturn/img/bg.png" as="image" type="image/png">
    <link rel="preload" href="https://cdn.jsdelivr.net/gh/ZoZou02/geeturn/sound/chain-rankup.MP3" as="audio" type="audio/mpeg">
    <link rel="preload" href="https://cdn.jsdelivr.net/gh/ZoZou02/geeturn/svg/s-svg-card.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="https://cdn.jsdelivr.net/gh/ZoZou02/geeturn/svg/s-chain01.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="https://cdn.jsdelivr.net/gh/ZoZou02/geeturn/svg/s-chain02.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="https://cdn.jsdelivr.net/gh/ZoZou02/geeturn/svg/s-chain03.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="https://cdn.jsdelivr.net/gh/ZoZou02/geeturn/svg/s-chain04.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="https://cdn.jsdelivr.net/gh/ZoZou02/geeturn/svg/s-chain05.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="https://cdn.jsdelivr.net/gh/ZoZou02/geeturn/svg/s-chain06.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="https://cdn.jsdelivr.net/gh/ZoZou02/geeturn/svg/s-chain-b-02.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="https://cdn.jsdelivr.net/gh/ZoZou02/geeturn/svg/s-chain-b-03.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="https://cdn.jsdelivr.net/gh/ZoZou02/geeturn/svg/s-chain-b-06.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="https://cdn.jsdelivr.net/gh/ZoZou02/geeturn/svg/s-close.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="https://cdn.jsdelivr.net/gh/ZoZou02/geeturn/svg/s-coop.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="https://cdn.jsdelivr.net/gh/ZoZou02/geeturn/svg/s-red.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="https://cdn.jsdelivr.net/gh/ZoZou02/geeturn/svg/s-red02.svg" as="image" type="image/svg+xml"> -->

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            cursor: url('svg/s-cursor.svg') 10 10, auto !important;
        }

        a,
        button {
            cursor: url('svg/s-cursor.svg') 10 10, pointer !important;
        }

        /* 文本选择状态 */
        input,
        textarea,
        [contenteditable="true"] {
            cursor: url('svg/s-cursor.svg') 10 10, text !important;
        }

        /* 覆盖其他可能的光标状态 */
        :active,
        :hover,
        :focus,
        :focus-within,
        ::before,
        ::after,
        *:hover,
        *:focus,
        *:active {
            cursor: url('svg/s-cursor.svg') 10 10, auto !important;
        }

        html,
        body {
            overflow: hidden;
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            position: relative;
            scrollbar-width: none;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-overflow-scrolling: touch;
            touch-action: manipulation;
        }

        /* 针对WebKit内核浏览器隐藏滚动条 */
        body::-webkit-scrollbar {
            display: none;
        }

        /* IE和Edge兼容性 */
        @media screen and (-ms-high-contrast: active),
        (-ms-high-contrast: none) {

            html,
            body {
                -ms-overflow-style: none;
            }
        }

        /* 专门的背景层，应用模糊和亮度效果 */
        .bg-layer {
            position: fixed;
            top: -1%;
            left: -1%;
            width: 102%;
            height: 102%;
            background-image: url('img/bg.png');
            background-size: cover;
            background-position: center center;
            background-repeat: no-repeat;
            filter: blur(0.4vw) brightness(0.4);
            z-index: -10;
            overflow: hidden;
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            cursor: pointer;
            overflow: hidden;
            background: transparent;
        }

        .loading-text {
            color: #fff;
            font-size: 1.7rem;
            font-family: '黑体', 'SimHei', "Microsoft YaHei UI Light", "微软雅黑 Light", sans-serif;
            font-stretch: condensed;
            letter-spacing: 2px;
            animation: pulse 1.5s ease-in-out infinite;
            text-align: center;
            line-height: 1.4;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.7);
            margin-bottom: 10px;
            position: fixed;
            width: 100%;
        }

        /* 红色文字的特殊样式 */
        .loading-text .highlight-red {
            color: #fd2d5c;
            text-shadow: 0 0 10px rgba(253, 45, 92, 0.9), 0 0 20px rgba(253, 45, 92, 0.7), 0 0 30px rgba(253, 45, 92, 0.5);
            font-weight: bold;
        }

        /* 三个独立段落的样式，可以单独调整位置 */
        .loading-text-part1 {
            opacity: 0;
            top: 20%;
            animation: fadeIn 1.5s ease-in-out forwards, pulse 1.5s ease-in-out infinite 1.5s;
        }

        .loading-text-part2 {
            opacity: 0;
            top: 45%;
            animation: fadeIn 1.5s ease-in-out forwards 1.5s, pulse 1.5s ease-in-out infinite 3s;
        }

        .loading-text-part3 {
            opacity: 0;
            top: 70%;
            animation: fadeIn 1.5s ease-in-out forwards 3s, pulse 1.5s ease-in-out infinite 4.5s;
        }

        .loading-instruction {
            color: #fff;
            font-size: 1.2rem;
            font-family: 'SimHei', '黑体', serif;
            letter-spacing: 2px;
            text-align: center;
            opacity: 0;
            text-shadow: 0 0 5px rgba(253, 45, 92, 0.5);
            position: fixed;
            bottom: 10%;
            width: 100%;
            animation: fadeIn 1.5s ease-in-out forwards 4.5s, loading-instruction-pulse 1.5s ease-in-out infinite 6s;
        }

        @keyframes fadeIn {
            0% {
                opacity: 0;
            }

            100% {
                opacity: 1;
            }
        }

        @keyframes pulse {
            0% {
                opacity: 1;
            }

            50% {
                opacity: 0.8;
            }

            100% {
                opacity: 1;
            }
        }

        @keyframes loading-instruction-pulse {
            0% {
                transform: scale(1);
                opacity: 1;
            }

            50% {
                transform: scale(1.1);
                opacity: 0.8;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* 淡出动画 */
        @keyframes fadeOut {
            0% {
                opacity: 1;
            }

            100% {
                opacity: 0;
            }
        }

        /* 预加载遮罩层样式 */
        .preload-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.8s ease-out;
        }

        .preload-logo {
            width: 200px;
            height: 200px;
            margin-bottom: 40px;
            position: relative;
        }

        .preload-logo img {
            width: 100%;
            height: 100%;
            animation: rotateY 2s linear infinite;
            transform-style: preserve-3d;
        }

        .preload-logo {
            perspective: 1000px;
        }

        @keyframes rotateY {
            from {
                transform: rotateY(0deg);
            }

            to {
                transform: rotateY(360deg);
            }
        }

        .preload-text {
            color: #fd2d5c;
            font-size: 1.5rem;
            font-family: 'SimHei', '黑体', sans-serif;
            letter-spacing: 2px;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(253, 45, 92, 0.7);
        }

        .preload-progress-container {
            width: 300px;
            height: 8px;
            background: white;
            border: 1px solid black;
            overflow: hidden;
            position: relative;
        }

        .preload-progress-bar {
            height: 100%;
            background: #fd2d5c;
            width: 0%;
            transition: width 0.3s ease;
            box-shadow: 0 0 10px rgba(253, 45, 92, 0.8);
        }

        .preload-percentage {
            color: #fff;
            font-size: 1rem;
            font-family: 'SimHei', '黑体', sans-serif;
            margin-top: 10px;
        }

        /* 主内容容器，初始隐藏 */
        .content-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        /* SVG覆盖层样式 - 中层 */
        .background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .background img {
            position: absolute;
            width: 100%;
            height: auto;
            object-fit: contain;
        }

        .bottom-frame {
            bottom: 0;
        }

        .top-frame {
            top: 0;
        }

        /* 卡片容器样式 */
        .card {
            position: fixed;
            top: 60%;
            left: 27%;
            transform: translate(-50%, -50%);
            transform-origin: center center;
            width: 30vw;
            height: auto;
            z-index: 10;
            animation: flipIn 0.5s linear forwards, cardShake 0.2s ease-in forwards 1.2s;
        }

        .card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* 从右侧快速移入，Z轴连续旋转无停顿 */
        @keyframes flipIn {
            0% {
                transform: translate(200%, -50%) scale(2) rotateY(80deg) rotateZ(0deg);
            }

            50% {
                transform: translate(50%, -50%) scale(1.5) rotateY(70deg) rotateZ(-180deg);
            }

            100% {
                transform: translate(-50%, -50%) scale(1) rotateY(0deg) rotateZ(-360deg);
            }
        }


        /* 链条移动路径 */
        @keyframes chainMoveUp {
            0% {
                transform: translate(15vw, 75vh);
                opacity: 1;
            }

            100% {
                transform: translate(-5vw, -10vh);
                opacity: 1;
            }
        }

        /* 链条01样式 - 从右斜上一点移动进 */
        .chain01 {
            position: fixed;
            transform: translate(0, 0);
            transform-origin: center center;
            width: 126vw;
            height: auto;
            z-index: 11;
            opacity: 0;
            animation: chain01MoveIn 0.3s linear forwards 0.5s, chain01Shake 0.2s ease-in forwards 1.2s;
        }

        .chain01 img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        @keyframes chain01MoveIn {
            0% {
                transform: translate(80vw, -20vh);
                opacity: 1;
            }

            100% {
                transform: translate(-12vw, 22vh);
                opacity: 1;
            }
        }

        @keyframes chain01Shake {
            0% {
                transform: translate(-12vw, 22vh);
            }

            20% {
                transform: translate(-12vw, 28vh);
            }

            40% {
                transform: translate(-12vw, 22vh);
            }

            60% {
                transform: translate(-12vw, 28vh);
            }

            80% {
                transform: translate(-12vw, 24vh);
            }

            100% {
                transform: translate(-12vw, 22vh);
            }
        }

        /* 链条02样式 */
        .chain02 {
            position: fixed;
            transform: translate(0, 0);
            transform-origin: center center;
            width: 66vw;
            height: 0;
            padding-bottom: 143%;
            background-image: url('svg/s-chain02.svg');
            background-size: contain;
            background-repeat: no-repeat;
            z-index: 3;
            opacity: 0;
            animation: chain02MoveDown 0.2s linear forwards 0.5s, chain02Shake 0.2s ease-in forwards 1.2s;
        }

        @keyframes chain02MoveDown {
            0% {
                transform: translate(18vw, -30vh);
                opacity: 1;
            }

            100% {
                transform: translate(-4vw, -2vh);
                opacity: 1;
            }
        }

        @keyframes chain02Shake {
            0% {
                transform: translate(-4vw, -2vh);
            }

            20% {
                transform: translate(-4vw, 4vh);
            }

            40% {
                transform: translate(-4vw, -2vh);
            }

            60% {
                transform: translate(-4vw, 4vh);
            }

            80% {
                transform: translate(-4vw, 1vh);
            }

            100% {
                transform: translate(-4vw, -2vh);
            }
        }

        /* 链条04样式 - 向上移动 */
        .chain04 {
            position: fixed;
            transform: translate(0, 0);
            transform-origin: center center;
            width: 36vw;
            height: 0;
            padding-bottom: 100%;
            background-image: url('svg/s-chain04.svg');
            background-size: contain;
            background-repeat: no-repeat;
            z-index: 4;
            opacity: 0;
            animation: chain04MoveUp 0.2s linear forwards 0.5s, chain04Shake 0.2s ease-in forwards 1.2s;
        }

        @keyframes chain04MoveUp {
            0% {
                transform: translate(15vw, 75vh);
                opacity: 1;
            }

            100% {
                transform: translate(-3vw, -10vh);
                opacity: 1;
            }
        }

        @keyframes chain04Shake {
            0% {
                transform: translate(-3vw, -10vh);
            }

            20% {
                transform: translate(-3vw, -16vh);
            }

            40% {
                transform: translate(-3vw, -10vh);
            }

            60% {
                transform: translate(-3vw, -16vh);
            }

            80% {
                transform: translate(-3vw, -13vh);
            }

            100% {
                transform: translate(-3vw, -10vh);
            }
        }

        /* 链条03样式 - 从右斜上往下插 */
        .chain03 {
            position: fixed;
            transform: translate(0, 0);
            transform-origin: center center;
            width: 14vw;
            height: 0;
            padding-bottom: 100%;
            background-image: url('svg/s-chain03.svg');
            background-size: contain;
            background-repeat: no-repeat;
            z-index: 3;
            opacity: 0;
            animation: chain03MoveDown 0.2s linear forwards 0.5s, chain03Shake 0.2s ease-in forwards 1.2s;
        }

        @keyframes chain03MoveDown {
            0% {
                transform: translate(20vw, -60vh);
                opacity: 1;
            }

            100% {
                transform: translate(15vw, -3vh);
                opacity: 1;
            }
        }

        @keyframes chain03Shake {
            0% {
                transform: translate(15vw, -3vh);
            }

            20% {
                transform: translate(15vw, -9vh);
            }

            40% {
                transform: translate(15vw, -3vh);
            }

            60% {
                transform: translate(15vw, -9vh);
            }

            80% {
                transform: translate(15vw, -6vh);
            }

            100% {
                transform: translate(15vw, -3vh);
            }
        }

        /* 链条05样式 - 30度向上移动 */
        .chain05 {
            position: fixed;
            transform: translate(0, 0);
            transform-origin: center center;
            width: 100vw;
            height: 0;
            padding-bottom: 100%;
            background-image: url('svg/s-chain05.svg');
            background-size: contain;
            background-repeat: no-repeat;
            z-index: 3;
            opacity: 0;
            animation: chain05MoveUp 0.2s linear forwards 0.5s, chain05Shake 0.2s ease-in forwards 1.2s;
        }

        @keyframes chain05MoveUp {
            0% {
                transform: translate(40vw, 80vh);
                opacity: 1;
            }

            100% {
                transform: translate(15vw, 58vh);
                opacity: 1;
            }
        }

        @keyframes chain05Shake {
            0% {
                transform: translate(15vw, 58vh);
            }

            20% {
                transform: translate(15vw, 64vh);
            }

            40% {
                transform: translate(15vw, 58vh);
            }

            60% {
                transform: translate(15vw, 64vh);
            }

            80% {
                transform: translate(15vw, 61vh);
            }

            100% {
                transform: translate(15vw, 58vh);
            }
        }

        /* 链条06样式 - 终点在chain05的左上方 */
        .chain06 {
            position: fixed;
            transform: translate(0, 0);
            transform-origin: center center;
            width: 65vw;
            height: 0;
            padding-bottom: 100%;
            background-image: url('svg/s-chain06.svg');
            background-size: contain;
            background-repeat: no-repeat;
            z-index: 3;
            opacity: 0;
            animation: chain06MoveUp 0.3s linear forwards 0.5s, chain06Shake 0.2s ease-in forwards 1.2s;
        }

        @keyframes chain06MoveUp {
            0% {
                transform: translate(40vw, 80vh);
                opacity: 1;
            }

            100% {
                transform: translate(-35vw, 28vh);
                opacity: 1;
            }
        }

        @keyframes chain06Shake {
            0% {
                transform: translate(-35vw, 28vh);
            }

            20% {
                transform: translate(-35vw, 34vh);
            }

            40% {
                transform: translate(-35vw, 28vh);
            }

            60% {
                transform: translate(-35vw, 34vh);
            }

            80% {
                transform: translate(-35vw, 31vh);
            }

            100% {
                transform: translate(-35vw, 28vh);
            }
        }

        /* red01样式 - 从右上往下砸并调整z-index */
        .red01 {
            position: fixed;
            transform: translate(0, 0);
            transform-origin: center center;
            width: 98vw;
            height: auto;
            z-index: 12;
            opacity: 0;
            animation: red01FallDown 0.1s ease-out forwards 1.1s;
        }

        .red01 img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        @keyframes red01FallDown {
            0% {
                transform: translate(50vw, -80vh);
                opacity: 1;
                z-index: 12;
            }

            98% {
                transform: translate(15vw, -20vh);
                opacity: 1;
                z-index: 12;
            }

            100% {
                transform: translate(15vw, -20vh);
                opacity: 1;
                z-index: 2;
            }
        }

        /* red02样式 - 在red01动画结束后从右下往上移动 */
        .red02 {
            position: fixed;
            transform: translate(0, 0);
            transform-origin: center center;
            width: 60vw;
            height: auto;
            z-index: 1;
            opacity: 0;
            animation: red02MoveUp 0.1s ease-out forwards 1.2s;
        }

        .red02 img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        @keyframes red02MoveUp {
            0% {
                transform: translate(-6vw, 40vh);
                opacity: 1;
            }

            100% {
                transform: translate(-16vw, 18vh);
                opacity: 1;
            }
        }

        /* 卡片上下震动动画 */
        @keyframes cardShake {
            0% {
                transform: translate(-50%, -50%) scale(1) rotateY(0deg) rotateZ(-360deg);
            }

            20% {
                transform: translate(-50%, -58%) scale(1) rotateY(0deg) rotateZ(-368deg);
            }

            40% {
                transform: translate(-50%, -42%) scale(1) rotateY(0deg) rotateZ(-352deg);
            }

            60% {
                transform: translate(-50%, -56%) scale(1) rotateY(0deg) rotateZ(-364deg);
            }

            80% {
                transform: translate(-50%, -44%) scale(1) rotateY(0deg) rotateZ(-356deg);
            }

            100% {
                transform: translate(-50%, -50%) scale(1) rotateY(0deg) rotateZ(-360deg);
            }
        }

        /* 卡片底部背景显示动画 */
        @keyframes cardBackgroundAppear {
            0% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(0.95);
            }

            100% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        /* 卡片背景样式 - s-card-b.svg */
        .card-background {
            position: fixed;
            top: 59%;
            left: 24%;
            transform: translate(-50%, -50%);
            transform-origin: center center;
            width: 29vw;
            height: auto;
            z-index: 5;
            opacity: 0;
            animation: cardBackgroundAppear 0.1s linear forwards 1.4s;
        }

        .card-background img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* 从卡片中向右出现的动画效果 */
        @keyframes appearFromCardRight {
            0% {
                transform: translate(-95%, -50%) scale(0.6);
                opacity: 0.5;
            }

            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
        }

        /* 卡片右边 - s-coop.svg样式 - 从卡片中向右出现 */
        .card-right-coop {
            position: fixed;
            top: 45%;
            left: 44%;
            transform: translate(-50%, -50%);
            transform-origin: center center;
            width: 24vw;
            height: auto;
            z-index: 20;
            opacity: 0;
            animation: appearFromCardRight 0.2s ease-out forwards 1.4s;
        }

        .card-right-coop img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* 卡片右边 - s-arcana.svg样式 - 从卡片中向右出现 */
        .card-right-arcana {
            position: fixed;
            top: 53%;
            left: 55%;
            transform: translate(-50%, -50%);
            transform-origin: center center;
            width: 48vw;
            height: auto;
            z-index: 15;
            opacity: 0;
            animation: appearFromCardRight 0.2s ease-out forwards 1.4s;
        }

        .card-right-arcana img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        @keyframes tenPulse {
            0% {
                transform: translate(-50%, -50%) scale(1);
            }

            10% {
                transform: translate(-50%, -50%) scale(1.05);
            }

            30% {
                transform: translate(-50%, -50%) scale(1);
            }

            100% {
                transform: translate(-50%, -50%) scale(1);
            }
        }

        .card-right-arcana-10 {
            position: fixed;
            top: 47%;
            left: 71%;
            transform: translate(-50%, -50%);
            transform-origin: center center;
            width: 16vw;
            height: auto;
            z-index: 16;
            opacity: 0;
            animation: appearFromCardRight 0.2s ease-out forwards 1.4s,
                tenPulse 2s ease-in-out infinite 4.6s;
        }

        .card-right-arcana-10 img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        @keyframes maxPulse {
            0% {
                transform: translate(-50%, -50%);
            }

            10% {
                transform: translate(-45%, -50%);
            }

            30% {
                transform: translate(-50%, -50%);
            }

            100% {
                transform: translate(-50%, -50%);
            }
        }

        .card-right-arcana-max {
            position: fixed;
            top: 47%;
            left: 80%;
            transform: translate(-50%, -50%);
            transform-origin: center center;
            width: 10vw;
            height: auto;
            z-index: 16;
            opacity: 0;
            animation: appearFromCardRight 0.2s ease-out forwards 1.4s,
                maxPulse 2s ease-in-out infinite 4.6s;
        }

        .card-right-arcana-max img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* 大变小弹入，停顿，小变大弹出动画效果 */
        @keyframes bounceInOut {
            0% {
                transform: translate(-50%, -50%) scale(1.5);
                opacity: 0;
            }

            30% {
                transform: translate(-50%, -50%) scale(0.9);
                opacity: 1;
            }

            40% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }


            60% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }

            70% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }

            80% {
                transform: translate(-50%, -50%) scale(0.95);
                opacity: 1;
            }

            100% {
                transform: translate(-50%, -50%) scale(1.3);
                opacity: 0;
            }
        }

        /* 星星立即显示动画 */
        @keyframes starAppear {
            0% {
                opacity: 0;
            }

            100% {
                opacity: 1;
            }
        }

        /* 星星变大缩小动画效果 */
        @keyframes starPulse {
            0% {
                transform: translate(-50%, -50%) scale(1);
            }

            10% {
                transform: translate(-50%, -50%) scale(1.5);
            }

            30% {
                transform: translate(-50%, -50%) scale(1);
            }

            100% {
                transform: translate(-50%, -50%) scale(1);
            }
        }

        @keyframes testPulse {
            0% {
                transform: translate(-50%, -50%) scale(1);
            }

            5% {
                transform: translate(-50%, -50%) scale(1.5);
            }

            10% {
                transform: translate(-50%, -50%) scale(1);
            }

            100% {
                transform: translate(-50%, -50%) scale(1);
            }
        }



        /* 星星容器 */
        .stars-container {
            position: fixed;
            top: 62%;
            left: 69%;
            transform: translate(-50%, -50%);
            width: 50vw;
            height: 10vh;
            z-index: 22;
            opacity: 1;
            animation: appearFromCardRight 0.2s ease-out forwards 1.4s;
        }

        /* 单个星星元素基础样式 */
        .star-item {
            position: absolute;
            width: 1.8vw;
            height: auto;
            opacity: 0;
            transform-origin: center center;
            transform: translate(-50%, -50%);
        }

        .star-item {
            animation-fill-mode: forwards;
        }

        .star-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* 横向斜排列的星星定位 */
        .star-1 {
            top: 101%;
            left: 0;
            animation:
                starAppear 0.1s ease-out forwards 1.4s,
                starPulse 2s ease-in-out infinite 2.6s;
        }

        .star-2 {
            top: 94%;
            left: 4%;
            animation:
                starAppear 0.1s ease-out forwards 1.4s,
                starPulse 2s ease-in-out infinite 2.8s;
        }

        .star-3 {
            top: 87%;
            left: 8%;
            animation:
                starAppear 0.1s ease-out forwards 1.4s,
                starPulse 2s ease-in-out infinite 3.0s;
        }

        .star-4 {
            top: 80%;
            left: 12%;
            animation:
                starAppear 0.1s ease-out forwards 1.4s,
                starPulse 2s ease-in-out infinite 3.2s;
        }

        .star-5 {
            top: 73%;
            left: 16%;
            animation:
                starAppear 0.1s ease-out forwards 1.4s,
                starPulse 2s ease-in-out infinite 3.4s;
        }

        .star-6 {
            top: 66%;
            left: 20%;
            animation:
                starAppear 0.1s ease-out forwards 1.4s,
                starPulse 2s ease-in-out infinite 3.6s;
        }

        .star-7 {
            top: 59%;
            left: 24%;
            animation:
                starAppear 0.1s ease-out forwards 1.4s,
                starPulse 2s ease-in-out infinite 3.8s;
        }

        .star-8 {
            top: 52%;
            left: 28%;
            animation:
                starAppear 0.1s ease-out forwards 1.4s,
                starPulse 2s ease-in-out infinite 4.0s;
        }

        .star-9 {
            top: 45%;
            left: 32%;
            animation:
                starAppear 0.1s ease-out forwards 1.4s,
                starPulse 2s ease-in-out infinite 4.2s;
        }

        .star-10 {
            top: 38%;
            left: 36%;
            animation:
                starAppear 0.1s ease-out forwards 1.4s,
                starPulse 2s ease-in-out infinite 4.4s;
        }

        /* 弹入弹出效果 */
        .return-bounce {
            position: fixed;
            top: 47%;
            left: 72%;
            transform: translate(-50%, -50%);
            transform-origin: center center;
            width: 27vw;
            height: auto;
            z-index: 25;
            opacity: 0;
            animation: bounceInOut 1s linear forwards 1.6s;
        }

        .return-bounce img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        /* 关闭按钮样式 */
        .close-button {
            position: fixed;
            bottom: 1vw;
            right: 3vw;
            width: 9vw;
            height: auto;
            z-index: 30;
            opacity: 0;
            transition: opacity 0.3s ease;
            cursor: pointer;
        }

        .close-button img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .close-button.visible {
            opacity: 1;
        }

        .close-button:hover {
            transform: scale(1.1);
            transition: transform 0.2s ease;
        }

        @keyframes backShake {
            0% {
                top: 0;
            }

            20% {
                top: 8px;
            }

            40% {
                top: 0;
            }

            60% {
                top: 8px;
            }

            80% {
                top: 4px;
            }

            100% {
                top: 0;
            }
        }

        /* s-chain-b-01四个部分的公共样式 - 初始状态为隐藏 */
        .chain01-new {
            position: fixed;
            transform-origin: center center;
            height: 0;
            background-size: contain;
            background-repeat: no-repeat;
            z-index: 11;
            opacity: 0;
        }

        /* s-chain-b-01各个部分的单独样式 */
        .chain01-bottom {
            background-image: url('svg/s-chain-b-01-bottom.svg');
            width: 40vw;
            padding-bottom: 100%;
            transform: translate(63vw, 72vh);
        }

        .chain01-left {
            background-image: url('svg/s-chain-b-01-left.svg');
            width: 24vw;
            padding-bottom: 100%;
            transform: translate(-11vw, 11vh);
        }

        .chain01-mid {
            background-image: url('svg/s-chain-b-01-mid.svg');
            width: 20vw;
            padding-bottom: 100%;
            transform: translate(33vw, 30vh);
        }

        .chain01-top {
            background-image: url('svg/s-chain-b-01-top.svg');
            width: 40vw;
            padding-bottom: 100%;
            transform: translate(58vw, -2vh);
        }

        /* 链条新部分的独立震动动画 */
        /* bottom部分动画 - 从中心向下炸开 */
        @keyframes chain01BottomShake {
            0% {
                transform: translate(50vw, 50vh) scale(0);
                opacity: 0;
            }

            30% {
                transform: translate(55vw, 65vh) scale(1.2);
                opacity: 1;
            }

            60% {
                transform: translate(63vw, 70vh) scale(1.1);
                opacity: 1;
            }

            80% {
                transform: translate(63vw, 71vh) scale(1.02);
                opacity: 1;
            }

            100% {
                transform: translate(63vw, 72vh) scale(1);
                opacity: 1;
            }
        }

        /* left部分动画 - 从中心向左炸开 */
        @keyframes chain01LeftShake {
            0% {
                transform: translate(50vw, 50vh) scale(0);
                opacity: 0;
            }

            30% {
                transform: translate(25vw, 35vh) scale(1.2);
                opacity: 1;
            }

            60% {
                transform: translate(0vw, 15vh) scale(1.1);
                opacity: 1;
            }

            80% {
                transform: translate(-6vw, 13vh) scale(1.05);
                opacity: 1;
            }

            100% {
                transform: translate(-11vw, 11vh) scale(1);
                opacity: 1;
            }
        }

        /* mid部分动画 - 从中心向右上方炸开 */
        @keyframes chain01MidShake {
            0% {
                transform: translate(50vw, 50vh) scale(0);
                opacity: 0;
            }

            30% {
                transform: translate(40vw, 40vh) scale(1.2);
                opacity: 1;
            }

            60% {
                transform: translate(35vw, 35vh) scale(1.1);
                opacity: 1;
            }

            80% {
                transform: translate(34vw, 32vh) scale(1.03);
                opacity: 1;
            }

            100% {
                transform: translate(33vw, 30vh) scale(1);
                opacity: 1;
            }
        }

        /* top部分动画 - 从中心向右上方炸开 */
        @keyframes chain01TopShake {
            0% {
                transform: translate(50vw, 30vh) scale(0);
                opacity: 0;
            }

            30% {
                transform: translate(55vw, 25vh) scale(1.2);
                opacity: 1;
            }

            60% {
                transform: translate(57vw, 5vh) scale(1.1);
                opacity: 1;
            }

            80% {
                transform: translate(57.5vw, -1vh) scale(1.02);
                opacity: 1;
            }

            100% {
                transform: translate(58vw, -2vh) scale(1);
                opacity: 1;
            }
        }
    </style>
</head>

<body>
    <!-- 背景层 -->
    <div class="bg-layer"></div>

    <!-- 预加载遮罩层 -->
    <div class="preload-overlay" id="preloadOverlay">
        <div class="preload-logo">
            <img src="svg/s-mask-load.svg" alt="Loading" />
        </div>
        <div class="preload-text">LOADING</div>
        <div class="preload-progress-container">
            <div class="preload-progress-bar" id="preloadProgressBar"></div>
        </div>
        <div class="preload-percentage" id="preloadPercentage">0%</div>
    </div>

    <!-- 加载遮罩层 -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-text loading-text-part1">
            吾即汝……<span class="highlight-red">汝</span>即吾……<br>
            汝於此，化<span class="highlight-red">寄</span>為意義之絆使其轉生
        </div>
        <div class="loading-text loading-text-part2">
            羈絆逐成為反<span class="highlight-red">抗</span>之翼<br>
            擊<span class="highlight-red">破</span>魂之枷鎖
        </div>
        <div class="loading-text loading-text-part3">
            今於此，汝覺醒「<span class="highlight-red">懷</span>念」之極罷奧祕<br>
            賜予<span class="highlight-red">汝</span>艾斯比之力……
        </div>
        <div class="loading-instruction">CLICK TO CONTINUE</div>
    </div>

    <!-- 主内容容器 -->
    <div class="content-container" id="contentContainer">
        <!-- 音频元素 - 页面加载后自动播放音效 -->
        <audio id="chainSound">
            <source src="sound/chain-rankup.MP3" type="audio/mpeg">
        </audio>

        <!-- SVG覆盖层 - 中层，分为上下两个框 -->
        <div class="background">
            <img src="svg/s-blackframe-b.svg" alt="底部黑色边框" class="bottom-frame">
            <img src="svg/s-blackframe-t.svg" alt="顶部黑色边框" class="top-frame">
        </div>

        <!-- 卡片背景 - s-card-b.svg -->
        <div class="card-background">
            <img src="svg/s-card-b.svg" alt="卡片背景">
        </div>

        <!-- 卡片右边 - s-coop.svg - 从卡片中向右出现 -->
        <div class="card-right-coop">
            <img src="svg/s-coop.svg" alt="卡片右边-coop">
        </div>

        <!-- 卡片右边 - s-arcana.svg - 从卡片中向右出现 -->
        <div class="card-right-arcana">
            <img src="svg/s-arcana-none.svg" alt="卡片右边-arcana">
        </div>

        <div class="card-right-arcana-10">
            <img src="svg/s-10-grey.svg" alt="卡片右边-arcana-10">
        </div>

        <div class="card-right-arcana-max">
            <img src="svg/s-max.svg" alt="卡片右边-arcana-max">
        </div>

        <!-- 10个星星元素 -->
        <div class="stars-container">
            <div class="star-item star-1">
                <img src="svg/s-star.svg" alt="星星图标1">
            </div>
            <div class="star-item star-2">
                <img src="svg/s-star.svg" alt="星星图标2">
            </div>
            <div class="star-item star-3">
                <img src="svg/s-star.svg" alt="星星图标3">
            </div>
            <div class="star-item star-4">
                <img src="svg/s-star.svg" alt="星星图标4">
            </div>
            <div class="star-item star-5">
                <img src="svg/s-star.svg" alt="星星图标5">
            </div>
            <div class="star-item star-6">
                <img src="svg/s-star.svg" alt="星星图标6">
            </div>
            <div class="star-item star-7">
                <img src="svg/s-star.svg" alt="星星图标7">
            </div>
            <div class="star-item star-8">
                <img src="svg/s-star.svg" alt="星星图标8">
            </div>
            <div class="star-item star-9">
                <img src="svg/s-star.svg" alt="星星图标9">
            </div>
            <div class="star-item star-10">
                <img src="svg/s-star.svg" alt="星星图标10">
            </div>
        </div>

        <!-- s-return.svg - 弹入弹出效果 -->
        <div class="return-bounce">
            <img src="svg/s-return.svg" alt="返回图标">
        </div>

        <!-- 关闭按钮 - 初始隐藏，动画结束后显示 -->
        <a href="https://zozou.top/geelain/" class="close-button" id="closeButton" style="display: none;">
            <img src="svg/s-close-pc.svg" alt="关闭按钮">
        </a>

        <!-- 卡片 -->
        <div class="card">
            <img src="svg/s-svg-card.svg" alt="卡片">
        </div>

        <!-- 链条元素 - 按顺序排列 -->
        <!-- 链条01 -->
        <div class="chain01" id="chain01">
            <img src="svg/s-chain01.svg" alt="链条01">
        </div>

        <!-- s-chain-b-01的四个部分 - 初始隐藏，在red01动画结束后显示 -->
        <div class="chain01-new chain01-bottom" id="chain01Bottom"></div>
        <div class="chain01-new chain01-left" id="chain01Left"></div>
        <div class="chain01-new chain01-mid" id="chain01Mid"></div>
        <div class="chain01-new chain01-top" id="chain01Top"></div>

        <!-- 链条02 -->
        <div class="chain02" id="chain02"></div>

        <!-- 链条03 -->
        <div class="chain03" id="chain03"></div>

        <!-- 链条04 -->
        <div class="chain04" id="chain04"></div>

        <!-- 链条05 -->
        <div class="chain05" id="chain05"></div>

        <!-- 链条06 -->
        <div class="chain06" id="chain06"></div>

        <!-- red01元素 - 从右上往下砸并移动到最下层 -->
        <div class="red01">
            <img src="svg/s-red01.svg" alt="red01元素">
        </div>

        <!-- red02元素 - 在red01动画结束后从右下往上移动 -->
        <div class="red02">
            <img src="svg/s-red02.svg" alt="red02元素">
        </div>


    </div>

    <script>
        // 预加载资源函数
        function preloadAllResources() {
            const resources = [
                // 背景图片
                'img/bg.png',
                // 音频文件
                'sound/chain-rankup.MP3',
                // SVG文件
                'svg/s-arcana-none.svg',
                'svg/s-blackframe-b.svg',
                'svg/s-blackframe-t.svg',
                'svg/s-card-b.svg',
                'svg/s-chain-b-01-bottom.svg',
                'svg/s-chain-b-01-left.svg',
                'svg/s-chain-b-01-mid.svg',
                'svg/s-chain-b-01-top.svg',
                'svg/s-chain-b-02.svg',
                'svg/s-chain-b-03.svg',
                'svg/s-chain-b-04.svg',
                'svg/s-chain-b-05.svg',
                'svg/s-chain-b-06.svg',
                'svg/s-chain01.svg',
                'svg/s-chain02.svg',
                'svg/s-chain03.svg',
                'svg/s-chain04.svg',
                'svg/s-chain05.svg',
                'svg/s-chain06.svg',
                'svg/s-close.svg',
                'svg/s-coop.svg',
                'svg/s-svg-card.svg',
                'svg/s-red.svg',
                'svg/s-red01.svg',
                'svg/s-red02.svg',
                'svg/s-return.svg',
                'svg/s-star.svg'
            ];

            const preloadOverlay = document.getElementById('preloadOverlay');
            const progressBar = document.getElementById('preloadProgressBar');
            const percentageText = document.getElementById('preloadPercentage');
            const loadingOverlay = document.getElementById('loadingOverlay');

            let loadedCount = 0;
            const totalCount = resources.length;
            const preloadStartTime = Date.now();
            let lastProgressTime = Date.now();

            // 初始隐藏原始加载层
            loadingOverlay.style.display = 'none';

            // 预加载单个资源，带超时处理
            function loadResource(url) {
                return new Promise((resolve) => {
                    // 设置超时，确保资源加载不会无限期等待
                    const timeout = setTimeout(() => {
                        console.warn(`资源加载超时: ${url}`);
                        resolve(); // 超时也视为完成
                    }, 10000); // 10秒超时

                    let loader;

                    // 根据文件类型创建不同的加载器
                    if (url.endsWith('.MP3') || url.endsWith('.mp3') || url.endsWith('.wav') || url.endsWith('.ogg')) {
                        loader = new Audio();
                        // 音频加载需要特殊处理
                        if ('canPlayType' in loader) {
                            // 尝试加载
                            loader.oncanplaythrough = () => {
                                clearTimeout(timeout);
                                console.log(`音频资源加载完成: ${url}`);
                                resolve();
                            };

                            loader.onerror = () => {
                                clearTimeout(timeout);
                                console.warn(`音频资源加载失败: ${url}`);
                                resolve(); // 即使失败也继续
                            };

                            loader.src = url;
                        } else {
                            clearTimeout(timeout);
                            resolve(); // 不支持音频元素时跳过
                        }
                    } else {
                        loader = new Image();

                        loader.onload = () => {
                            clearTimeout(timeout);
                            console.log(`图片资源加载完成: ${url}`);
                            resolve();
                        };

                        loader.onerror = () => {
                            clearTimeout(timeout);
                            console.warn(`图片资源加载失败: ${url}`);
                            resolve(); // 即使失败也继续加载其他资源
                        };

                        loader.src = url;
                    }
                });
            }

            // 更新进度
            function updateProgress() {
                // 确保loadedCount不会超过totalCount
                if (loadedCount < totalCount) {
                    loadedCount++;
                }

                lastProgressTime = Date.now(); // 更新最后进度时间
                const progress = Math.min(Math.floor((loadedCount / totalCount) * 100), 100);
                progressBar.style.width = `${progress}%`;
                percentageText.textContent = `${progress}%`;
                console.log(`资源加载进度: ${loadedCount}/${totalCount} (${progress}%)`);

                // 所有资源加载完成
                if (loadedCount >= totalCount) {
                    console.log('所有资源预加载完成！');
                    // 添加一小段延迟让用户看到100%的状态
                    setTimeout(() => {
                        console.log('显示原始加载层...');
                        preloadOverlay.style.animation = 'fadeOut 1s ease-in-out forwards';
                        preloadOverlay.addEventListener('animationend', function handlePreloadEnd() {
                            preloadOverlay.style.display = 'none';
                            loadingOverlay.style.display = 'flex'; // 显示原始加载层
                            preloadOverlay.removeEventListener('animationend', handlePreloadEnd);
                            console.log('加载流程完成');

                            // 清除安全检查定时器
                            if (safetyCheckInterval) {
                                clearInterval(safetyCheckInterval);
                            }
                        }, { once: true });
                    }, 500);
                }
            }

            // 开始预加载所有资源
            console.log(`开始预加载 ${totalCount} 个资源`);

            // 预加载所有资源并更新进度
            // 直接加载所有资源，确保每个资源加载后都更新进度
            const promises = resources.map(url => {
                return loadResource(url).then(() => {
                    // 每个资源加载完成后立即更新进度
                    updateProgress();
                });
            });

            // 监听所有资源加载状态，确保即使有失败也能完成
            Promise.allSettled(promises).then(() => {
                console.log('所有资源加载请求已完成');

                // 确保最后进度正确
                if (loadedCount < totalCount) {
                    console.warn('部分资源可能加载失败，但强制完成预加载');
                    loadedCount = totalCount;
                    updateProgress();
                }
            });

            // 添加更积极的安全机制，确保即使某些资源加载失败，页面也能继续
            let safetyCheckInterval = setInterval(() => {
                const currentProgress = Math.floor((loadedCount / totalCount) * 100);
                console.log(`当前加载进度: ${loadedCount}/${totalCount} (${currentProgress}%)`);

                // 如果已达到100%，清除定时器
                if (currentProgress >= 100) {
                    clearInterval(safetyCheckInterval);
                    return;
                }

                // 如果5秒内没有任何进度，强制完成
                if (loadedCount > 0 && loadedCount < totalCount && Date.now() - lastProgressTime > 500000) {
                    console.warn('加载进度停滞，强制完成预加载');
                    loadedCount = totalCount;
                    updateProgress();
                    clearInterval(safetyCheckInterval);
                }

                // 总时间超过10秒，强制完成
                if (Date.now() - preloadStartTime > 1000000) {
                    console.warn('预加载总时间超过限制，强制完成');
                    loadedCount = totalCount;
                    updateProgress();
                    clearInterval(safetyCheckInterval);
                }
            }, 1000); // 每秒检查一次
        }

        // 页面加载完成后立即开始预加载
        document.addEventListener('DOMContentLoaded', function () {
            // 首先调用预加载函数
            preloadAllResources();

            const loadingOverlay = document.getElementById('loadingOverlay');
            const contentContainer = document.getElementById('contentContainer');
            const returnBounce = document.querySelector('.return-bounce');
            const closeButton = document.getElementById('closeButton');

            // 点击遮罩层时显示内容
            loadingOverlay.addEventListener('click', function () {
                // 添加淡出动画
                loadingOverlay.style.animation = 'fadeOut 1s ease-in-out forwards';

                // 动画结束后显示主内容
                loadingOverlay.addEventListener('animationend', function handleAnimationEnd() {
                    // 隐藏遮罩层
                    loadingOverlay.style.display = 'none';

                    // 显示主内容
                    contentContainer.style.display = 'block';

                    // 执行原始的页面加载逻辑
                    initPage();

                    // 移除事件监听器，避免重复触发
                    loadingOverlay.removeEventListener('animationend', handleAnimationEnd);
                }, { once: true });
            });

            // 将原始的页面加载逻辑封装到一个函数中
            function initPage() {
                // 监听return-bounce元素的动画结束事件
                if (returnBounce && closeButton) {
                    returnBounce.addEventListener('animationend', function (event) {
                        if (event.animationName === 'bounceInOut') {
                            setTimeout(function () {
                                closeButton.style.display = 'block';
                                setTimeout(function () {
                                    closeButton.classList.add('visible');
                                }, 10);
                            }, 500);
                        }
                    }, { once: true });
                }

                // 为所有chain元素添加动画结束事件监听
                const chains = ['chain02', 'chain03', 'chain04', 'chain05', 'chain06'];

                chains.forEach(function (chainId) {
                    const chain = document.getElementById(chainId);
                    if (chain) {
                        chain.addEventListener('animationend', function (event) {
                            if (event.animationName === chainId + 'Shake') {
                                chain.style.backgroundImage = `url('svg/s-chain-b-${chainId.replace('chain', '')}.svg')`;
                            }
                        });
                    }
                });

                // 监听red01动画结束事件，隐藏chain01并显示四个新的chain01部分
                const red01 = document.querySelector('.red01');
                const chain01 = document.getElementById('chain01');
                const chain01Parts = [
                    document.getElementById('chain01Bottom'),
                    document.getElementById('chain01Left'),
                    document.getElementById('chain01Mid'),
                    document.getElementById('chain01Top')
                ];

                if (red01 && chain01) {
                    red01.addEventListener('animationend', function (event) {
                        if (event.animationName === 'red01FallDown') {
                            // 隐藏原始chain01 - 使用display: none确保完全隐藏
                            chain01.style.display = 'none';
                            const animations = [
                                'chain01BottomShake',
                                'chain01LeftShake',
                                'chain01MidShake',
                                'chain01TopShake'
                            ];

                            // 同时触发四个部分的动画，略有先后顺序
                            chain01Parts.forEach(function (part, index) {
                                if (part) {
                                    setTimeout(function () {
                                        part.style.animation = animations[index] + ' 0.3s ease-out forwards';
                                    }, index * 50);
                                }
                            });
                        }
                    });
                }

                // 播放音效 - 修改为在用户交互后才播放
                function setupSoundPlayback() {
                    const audio = document.getElementById('chainSound');
                    audio.volume = 1;

                    // 尝试播放音频
                    audio.play().catch(e => {
                        console.log('音频播放失败:', e);
                    });
                }

                // 设置音频播放
                setupSoundPlayback();
            }
        });

        // 为关闭按钮添加点击事件处理
        document.addEventListener('DOMContentLoaded', function () {
            const closeButton = document.getElementById('closeButton');
            if (closeButton) {
                // 关闭按钮点击处理函数
                function handleCloseClick() {
                    // 退出全屏函数
                    function exitFullscreen() {
                        if (document.exitFullscreen) {
                            return document.exitFullscreen();
                        } else if (document.mozCancelFullScreen) {
                            return document.mozCancelFullScreen();
                        } else if (document.webkitExitFullscreen) {
                            return document.webkitExitFullscreen();
                        } else if (document.msExitFullscreen) {
                            return document.msExitFullscreen();
                        }
                        return Promise.resolve(); // 如果浏览器不支持全屏API，返回一个已解析的Promise
                    }

                    // 先退出全屏，然后再执行跳转
                    exitFullscreen().then(function () {
                        // 退出全屏后，延迟一小段时间再跳转，确保全屏状态已完全退出
                        setTimeout(function () {
                            window.location.href = closeButton.getAttribute('href');
                        }, 100);
                    });
                }

                // 为关闭按钮添加点击事件
                closeButton.addEventListener('click', function (e) {
                    // 阻止默认跳转行为
                    e.preventDefault();
                    handleCloseClick();
                });

                // 添加键盘事件监听器，支持空格键触发关闭
                document.addEventListener('keydown', function (e) {
                    // 检查是否按下的是空格键且关闭按钮可见
                    if (e.code === 'Space' && !e.shiftKey && closeButton.style.display !== 'none' && closeButton.classList.contains('visible')) {
                        e.preventDefault(); // 阻止空格键的默认行为（如页面滚动）
                        handleCloseClick();
                    }
                });
            }
        });
    </script>
</body>

</html>